{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCKxDC,IAAAA,aAAiBC,IAAI,mBAAoB,WACvC,IAAIC,EAAM,GACNC,GAAS,EACTC,GAAU,EACVC,GAAY,GAEhBC,EAAAA,EAAAA,QAAOC,IAAAA,UAAqB,OAAQ,SAAUC,GAsB5C,GApBKJ,GAAYD,IACfC,GAAU,EACVJ,IAAAA,QAAY,CACVS,OAAQ,MACRC,IAAKV,IAAAA,MAAUW,UAAU,UAAY,gBACpCC,KAAK,SAAAC,GACNX,EAAMW,EAASC,KAAKC,IAAI,SAAAC,GAAE,MAAK,CAC7BC,MAAOD,EAAGE,WAAWD,MACrBE,YAAaH,EAAGE,WAAWC,YAC3BC,MAAOJ,EAAGE,WAAWG,SACrBX,IAAKM,EAAGE,WAAWR,IACpB,GACDP,GAAS,EACTmB,EAAEC,QACJ,GAAE,MAAO,SAAAC,GACPC,QAAQD,MAAM,6BAA8BA,GAC5CpB,GAAU,CACZ,IAGGD,GAAyB,IAAfD,EAAIwB,OAAnB,CAEA,IAAMC,EAAcnB,EAAKoB,SAASC,UAChC,SAAAC,GAAK,OAAIA,EAAMC,OAASD,EAAMC,MAAMC,WAAaF,EAAMC,MAAMC,UAAUC,SAAS,YAAY,GAGxFC,GAA+B,IAAjBP,EAAqBA,EAAc,EAAI,EAErDQ,EACJb,EAAA,OAAKU,UAAS,wBAAyB3B,EAAY,aAAe,cAChEiB,EAAA,UACEU,UAAU,mBACVI,QAAS,WACP/B,GAAaA,EACbiB,EAAEC,QACJ,EACAN,MAAOZ,EAAY,WAAa,YAEhCiB,EAAA,YAAOjB,EAAY,WAAa,YAC/BgC,IAAKhC,EAAY,oBAAsB,wBAG1CiB,EAAA,OAAKU,UAAU,qBACbV,EAAA,OAAKU,UAAU,qBACbV,EAAA,OAAKU,UAAU,kBACZ9B,EAAIa,IAAI,SAACC,EAAIsB,GAAK,OACjBhB,EAAA,KACEpC,IAAKoD,EACLC,KAAMvB,EAAGN,IACTsB,UAAU,gBACVQ,OAAO,SACPC,IAAI,sBACJC,MAAO,CAAEC,gBAAiB,OAAO3B,EAAGI,MAAK,MAEzCE,EAAA,OAAKU,UAAU,oBACbV,EAAA,UAAKN,EAAGC,OACRK,EAAA,SAAIN,EAAGG,cAEP,OAQhBX,EAAKoB,SAASgB,OAAOV,EAAa,EAAGC,EA9CE,CA+CzC,EACF,E","sources":["webpack://js/webpack/bootstrap","webpack://js/webpack/runtime/compat get default export","webpack://js/webpack/runtime/define property getters","webpack://js/webpack/runtime/hasOwnProperty shorthand","webpack://js/external root \"flarum.core.compat['forum/app']\"","webpack://js/external root \"flarum.core.compat['common/extend']\"","webpack://js/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://js/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://js/./src/forum.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport icon from 'flarum/common/helpers/icon';\r\n\r\napp.initializers.add('knowz/custom-ads', () => {\r\n  let ads = [];\r\n  let loaded = false;\r\n  let loading = false;\r\n  let isVisible = true; // Default: ads are visible\r\n\r\n  extend(IndexPage.prototype, 'view', function (vdom) {\r\n    // Fetch ads from API only once\r\n    if (!loading && !loaded) {\r\n      loading = true;\r\n      app.request({\r\n        method: 'GET',\r\n        url: app.forum.attribute('apiUrl') + '/custom-ads',\r\n      }).then(response => {\r\n        ads = response.data.map(ad => ({\r\n          title: ad.attributes.title,\r\n          description: ad.attributes.description,\r\n          image: ad.attributes.imageUrl,\r\n          url: ad.attributes.url,\r\n        }));\r\n        loaded = true;\r\n        m.redraw();\r\n      }).catch(error => {\r\n        console.error('Failed to load custom ads:', error);\r\n        loading = false;\r\n      });\r\n    }\r\n\r\n    if (!loaded || ads.length === 0) return;\r\n\r\n    const headerIndex = vdom.children.findIndex(\r\n      child => child.attrs && child.attrs.className && child.attrs.className.includes('App-title')\r\n    );\r\n\r\n    const insertIndex = headerIndex !== -1 ? headerIndex + 1 : 0;\r\n\r\n    const adsElement = (\r\n      <div className={`knowz-ads-container ${isVisible ? 'is-visible' : 'is-hidden'}`}>\r\n        <button\r\n          className=\"knowz-ads-toggle\"\r\n          onclick={() => {\r\n            isVisible = !isVisible;\r\n            m.redraw();\r\n          }}\r\n          title={isVisible ? 'Hide ads' : 'Show ads'}\r\n        >\r\n          <span>{isVisible ? 'Hide ads' : 'Show ads'}</span>\r\n          {icon(isVisible ? 'fas fa-chevron-up' : 'fas fa-chevron-down')}\r\n        </button>\r\n\r\n        <div className=\"knowz-ads-wrapper\">\r\n          <div className=\"knowz-ads-content\">\r\n            <div className=\"knowz-ads-grid\">\r\n              {ads.map((ad, index) => (\r\n                <a\r\n                  key={index}\r\n                  href={ad.url}\r\n                  className=\"knowz-ad-card\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  style={{ backgroundImage: `url(${ad.image})` }}\r\n                >\r\n                  <div className=\"knowz-ad-content\">\r\n                    <h4>{ad.title}</h4>\r\n                    <p>{ad.description}</p>\r\n                  </div>\r\n                </a>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    vdom.children.splice(insertIndex, 0, adsElement);\r\n  });\r\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","add","ads","loaded","loading","isVisible","extend","IndexPage","vdom","method","url","attribute","then","response","data","map","ad","title","attributes","description","image","imageUrl","m","redraw","error","console","length","headerIndex","children","findIndex","child","attrs","className","includes","insertIndex","adsElement","onclick","icon","index","href","target","rel","style","backgroundImage","splice"],"ignoreList":[],"sourceRoot":""}