{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://js/webpack/bootstrap","webpack://js/webpack/runtime/compat get default export","webpack://js/webpack/runtime/define property getters","webpack://js/webpack/runtime/hasOwnProperty shorthand","webpack://js/external root \"flarum.core.compat['admin/app']\"","webpack://js/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://js/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://js/external root \"flarum.core.compat['common/components/Button']\"","webpack://js/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://js/./src/admin/components/CustomAdsPage.js","webpack://js/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://js/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class CustomAdsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.ads = [];\n    this.editingAd = null;\n    this.loadAds();\n  }\n\n  loadAds() {\n    this.loading = true;\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/custom-ads',\n    }).then(response => {\n      this.ads = response.data || [];\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  content() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"CustomAdsPage\">\n        <div className=\"container\">\n          <h2>Manage Custom Ads</h2>\n          \n          <Button\n            className=\"Button Button--primary\"\n            onclick={() => this.showAdForm(null)}\n          >\n            Add New Ad\n          </Button>\n\n          {this.editingAd !== null && this.adForm()}\n\n          <div className=\"CustomAds-list\" style=\"margin-top: 20px;\">\n            {this.ads.length === 0 ? (\n              <p>No ads created yet. Click \"Add New Ad\" to create one.</p>\n            ) : (\n              <table className=\"Table\" style=\"width: 100%;\">\n                <thead>\n                  <tr>\n                    <th>Title</th>\n                    <th>URL</th>\n                    <th>Status</th>\n                    <th>Position</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.ads.map(ad => (\n                    <tr key={ad.id}>\n                      <td>{ad.attributes.title}</td>\n                      <td>\n                        <a href={ad.attributes.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {ad.attributes.url.substring(0, 50)}...\n                        </a>\n                      </td>\n                      <td>\n                        <span className={ad.attributes.isActive ? 'Badge Badge--success' : 'Badge'}>\n                          {ad.attributes.isActive ? 'Active' : 'Inactive'}\n                        </span>\n                      </td>\n                      <td>{ad.attributes.position}</td>\n                      <td>\n                        <Button\n                          className=\"Button Button--link\"\n                          onclick={() => this.showAdForm(ad)}\n                        >\n                          Edit\n                        </Button>\n                        {' '}\n                        <Button\n                          className=\"Button Button--link\"\n                          onclick={() => this.deleteAd(ad)}\n                        >\n                          Delete\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  showAdForm(ad) {\n    this.editingAd = ad || {\n      id: null,\n      attributes: {\n        title: '',\n        description: '',\n        imageUrl: '',\n        url: '',\n        position: 0,\n        isActive: true,\n      }\n    };\n  }\n\n  adForm() {\n    const ad = this.editingAd;\n    const isNew = !ad.id;\n\n    return (\n      <div className=\"Form\" style=\"background: #f9f9f9; padding: 20px; margin: 20px 0; border-radius: 4px;\">\n        <h3>{isNew ? 'Add New Ad' : 'Edit Ad'}</h3>\n        \n        <div className=\"Form-group\">\n          <label>Title *</label>\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            value={ad.attributes.title}\n            oninput={(e) => ad.attributes.title = e.target.value}\n            placeholder=\"Enter ad title\"\n          />\n        </div>\n\n        <div className=\"Form-group\">\n          <label>Description *</label>\n          <textarea\n            className=\"FormControl\"\n            rows=\"3\"\n            value={ad.attributes.description}\n            oninput={(e) => ad.attributes.description = e.target.value}\n            placeholder=\"Enter ad description\"\n          />\n        </div>\n\n        <div className=\"Form-group\">\n          <label>Image URL *</label>\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            value={ad.attributes.imageUrl}\n            oninput={(e) => ad.attributes.imageUrl = e.target.value}\n            placeholder=\"https://example.com/image.jpg\"\n          />\n          <small>Tip: Use /assets/extensions/knowz-custom-ads/images/yourimage.jpg for local images</small>\n        </div>\n\n        <div className=\"Form-group\">\n          <label>Link URL *</label>\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            value={ad.attributes.url}\n            oninput={(e) => ad.attributes.url = e.target.value}\n            placeholder=\"https://example.com\"\n          />\n        </div>\n\n        <div className=\"Form-group\">\n          <label>Position (lower numbers appear first)</label>\n          <input\n            className=\"FormControl\"\n            type=\"number\"\n            value={ad.attributes.position}\n            oninput={(e) => ad.attributes.position = parseInt(e.target.value) || 0}\n          />\n        </div>\n\n        <div className=\"Form-group\">\n          <label className=\"checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={ad.attributes.isActive}\n              onchange={(e) => ad.attributes.isActive = e.target.checked}\n            />\n            Active (show this ad on the forum)\n          </label>\n        </div>\n\n        <Button\n          className=\"Button Button--primary\"\n          onclick={() => this.saveAd(ad, isNew)}\n        >\n          {isNew ? 'Create Ad' : 'Save Changes'}\n        </Button>\n        {' '}\n        <Button\n          className=\"Button\"\n          onclick={() => this.editingAd = null}\n        >\n          Cancel\n        </Button>\n      </div>\n    );\n  }\n\n  saveAd(ad, isNew) {\n    if (!ad.attributes.title || !ad.attributes.description || !ad.attributes.imageUrl || !ad.attributes.url) {\n      app.alerts.show({ type: 'error' }, 'Please fill in all required fields');\n      return;\n    }\n\n    const method = isNew ? 'POST' : 'PATCH';\n    const url = isNew\n      ? app.forum.attribute('apiUrl') + '/custom-ads'\n      : app.forum.attribute('apiUrl') + '/custom-ads/' + ad.id;\n\n    app.request({\n      method,\n      url,\n      body: { data: { attributes: ad.attributes } },\n    }).then(() => {\n      this.editingAd = null;\n      this.loadAds();\n      app.alerts.show({ type: 'success' }, isNew ? 'Ad created successfully!' : 'Ad updated successfully!');\n    }).catch(() => {\n      app.alerts.show({ type: 'error' }, 'Failed to save ad. Please try again.');\n    });\n  }\n\n  deleteAd(ad) {\n    if (!confirm('Are you sure you want to delete this ad?')) return;\n\n    app.request({\n      method: 'DELETE',\n      url: app.forum.attribute('apiUrl') + '/custom-ads/' + ad.id,\n    }).then(() => {\n      this.loadAds();\n      app.alerts.show({ type: 'success' }, 'Ad deleted successfully!');\n    }).catch(() => {\n      app.alerts.show({ type: 'error' }, 'Failed to delete ad. Please try again.');\n    });\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\nimport CustomAdsPage from './components/CustomAdsPage';\n\napp.initializers.add('knowz/custom-ads', () => {\n  app.extensionData\n    .for('knowz-custom-ads')\n    .registerPage(CustomAdsPage);\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","CustomAdsPage","_ExtensionPage","apply","arguments","create","constructor","_proto","oninit","vnode","this","loading","ads","editingAd","loadAds","_this","app","method","url","attribute","then","response","data","m","redraw","content","_this2","LoadingIndicator","className","Button","onclick","showAdForm","adForm","style","length","map","ad","id","attributes","title","href","target","rel","substring","isActive","position","deleteAd","description","imageUrl","_this3","isNew","type","value","oninput","placeholder","rows","parseInt","checked","onchange","saveAd","_this4","body","show","_this5","confirm","ExtensionPage","add","registerPage"],"ignoreList":[],"sourceRoot":""}