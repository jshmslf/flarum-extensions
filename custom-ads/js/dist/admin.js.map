{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://js/webpack/bootstrap","webpack://js/webpack/runtime/compat get default export","webpack://js/webpack/runtime/define property getters","webpack://js/webpack/runtime/hasOwnProperty shorthand","webpack://js/external root \"flarum.core.compat['admin/app']\"","webpack://js/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://js/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://js/external root \"flarum.core.compat['common/components/Button']\"","webpack://js/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://js/./src/admin/components/CustomAdsPage.js","webpack://js/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://js/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\r\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\r\n    return t.__proto__ = e, t;\r\n  }, _setPrototypeOf(t, e);\r\n}\r\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/admin/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Button from 'flarum/common/components/Button';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\n\r\nexport default class CustomAdsPage extends ExtensionPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.loading = true;\r\n    this.ads = [];\r\n    this.editingAd = null;\r\n    this.loadAds();\r\n  }\r\n\r\n  loadAds() {\r\n    this.loading = true;\r\n    app.request({\r\n      method: 'GET',\r\n      url: app.forum.attribute('apiUrl') + '/custom-ads',\r\n    }).then(response => {\r\n      this.ads = response.data || [];\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  content() {\r\n    if (this.loading) {\r\n      return <LoadingIndicator />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"CustomAdsPage\">\r\n        <div className=\"container\">\r\n          <h2>Manage Custom Ads</h2>\r\n          \r\n          <Button\r\n            className=\"Button Button--primary\"\r\n            onclick={() => this.showAdForm(null)}\r\n          >\r\n            Add New Ad\r\n          </Button>\r\n\r\n          {this.editingAd !== null && this.adForm()}\r\n\r\n          <div className=\"CustomAds-list\" style=\"margin-top: 20px;\">\r\n            {this.ads.length === 0 ? (\r\n              <p>No ads created yet. Click \"Add New Ad\" to create one.</p>\r\n            ) : (\r\n              <table className=\"Table\" style=\"width: 100%;\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Title</th>\r\n                    <th>URL</th>\r\n                    <th>Status</th>\r\n                    <th>Position</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {this.ads.map(ad => (\r\n                    <tr key={ad.id}>\r\n                      <td>{ad.attributes.title}</td>\r\n                      <td>\r\n                        <a href={ad.attributes.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          {ad.attributes.url.substring(0, 50)}...\r\n                        </a>\r\n                      </td>\r\n                      <td>\r\n                        <span className={ad.attributes.isActive ? 'Badge Badge--success' : 'Badge'}>\r\n                          {ad.attributes.isActive ? 'Active' : 'Inactive'}\r\n                        </span>\r\n                      </td>\r\n                      <td>{ad.attributes.position}</td>\r\n                      <td>\r\n                        <Button\r\n                          className=\"Button Button--link\"\r\n                          onclick={() => this.showAdForm(ad)}\r\n                        >\r\n                          Edit\r\n                        </Button>\r\n                        {' '}\r\n                        <Button\r\n                          className=\"Button Button--link\"\r\n                          onclick={() => this.deleteAd(ad)}\r\n                        >\r\n                          Delete\r\n                        </Button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  showAdForm(ad) {\r\n    this.editingAd = ad || {\r\n      id: null,\r\n      attributes: {\r\n        title: '',\r\n        description: '',\r\n        imageUrl: '',\r\n        url: '',\r\n        position: 0,\r\n        isActive: true,\r\n      }\r\n    };\r\n  }\r\n\r\n  adForm() {\r\n    const ad = this.editingAd;\r\n    const isNew = !ad.id;\r\n\r\n    return (\r\n      <div className=\"Form\" style=\"background: #f9f9f9; padding: 20px; margin: 20px 0; border-radius: 4px;\">\r\n        <h3>{isNew ? 'Add New Ad' : 'Edit Ad'}</h3>\r\n        \r\n        <div className=\"Form-group\">\r\n          <label>Title *</label>\r\n          <input\r\n            className=\"FormControl\"\r\n            type=\"text\"\r\n            value={ad.attributes.title}\r\n            oninput={(e) => ad.attributes.title = e.target.value}\r\n            placeholder=\"Enter ad title\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"Form-group\">\r\n          <label>Description *</label>\r\n          <textarea\r\n            className=\"FormControl\"\r\n            rows=\"3\"\r\n            value={ad.attributes.description}\r\n            oninput={(e) => ad.attributes.description = e.target.value}\r\n            placeholder=\"Enter ad description\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"Form-group\">\r\n          <label>Image URL *</label>\r\n          <input\r\n            className=\"FormControl\"\r\n            type=\"text\"\r\n            value={ad.attributes.imageUrl}\r\n            oninput={(e) => ad.attributes.imageUrl = e.target.value}\r\n            placeholder=\"https://example.com/image.jpg\"\r\n          />\r\n          <small>Tip: Use /assets/extensions/knowz-custom-ads/images/yourimage.jpg for local images</small>\r\n        </div>\r\n\r\n        <div className=\"Form-group\">\r\n          <label>Link URL *</label>\r\n          <input\r\n            className=\"FormControl\"\r\n            type=\"text\"\r\n            value={ad.attributes.url}\r\n            oninput={(e) => ad.attributes.url = e.target.value}\r\n            placeholder=\"https://example.com\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"Form-group\">\r\n          <label>Position (lower numbers appear first)</label>\r\n          <input\r\n            className=\"FormControl\"\r\n            type=\"number\"\r\n            value={ad.attributes.position}\r\n            oninput={(e) => ad.attributes.position = parseInt(e.target.value) || 0}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"Form-group\">\r\n          <label className=\"checkbox\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={ad.attributes.isActive}\r\n              onchange={(e) => ad.attributes.isActive = e.target.checked}\r\n            />\r\n            Active (show this ad on the forum)\r\n          </label>\r\n        </div>\r\n\r\n        <Button\r\n          className=\"Button Button--primary\"\r\n          onclick={() => this.saveAd(ad, isNew)}\r\n        >\r\n          {isNew ? 'Create Ad' : 'Save Changes'}\r\n        </Button>\r\n        {' '}\r\n        <Button\r\n          className=\"Button\"\r\n          onclick={() => this.editingAd = null}\r\n        >\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  saveAd(ad, isNew) {\r\n    if (!ad.attributes.title || !ad.attributes.description || !ad.attributes.imageUrl || !ad.attributes.url) {\r\n      app.alerts.show({ type: 'error' }, 'Please fill in all required fields');\r\n      return;\r\n    }\r\n\r\n    const method = isNew ? 'POST' : 'PATCH';\r\n    const url = isNew\r\n      ? app.forum.attribute('apiUrl') + '/custom-ads'\r\n      : app.forum.attribute('apiUrl') + '/custom-ads/' + ad.id;\r\n\r\n    app.request({\r\n      method,\r\n      url,\r\n      body: { data: { attributes: ad.attributes } },\r\n    }).then(() => {\r\n      this.editingAd = null;\r\n      this.loadAds();\r\n      app.alerts.show({ type: 'success' }, isNew ? 'Ad created successfully!' : 'Ad updated successfully!');\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to save ad. Please try again.');\r\n    });\r\n  }\r\n\r\n  deleteAd(ad) {\r\n    if (!confirm('Are you sure you want to delete this ad?')) return;\r\n\r\n    app.request({\r\n      method: 'DELETE',\r\n      url: app.forum.attribute('apiUrl') + '/custom-ads/' + ad.id,\r\n    }).then(() => {\r\n      this.loadAds();\r\n      app.alerts.show({ type: 'success' }, 'Ad deleted successfully!');\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to delete ad. Please try again.');\r\n    });\r\n  }\r\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\r\nfunction _inheritsLoose(t, o) {\r\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\r\n}\r\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\r\nimport CustomAdsPage from './components/CustomAdsPage';\r\n\r\napp.initializers.add('knowz/custom-ads', () => {\r\n  app.extensionData\r\n    .for('knowz-custom-ads')\r\n    .registerPage(CustomAdsPage);\r\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","CustomAdsPage","_ExtensionPage","apply","arguments","create","constructor","_proto","oninit","vnode","this","loading","ads","editingAd","loadAds","_this","app","method","url","attribute","then","response","data","m","redraw","content","_this2","LoadingIndicator","className","Button","onclick","showAdForm","adForm","style","length","map","ad","id","attributes","title","href","target","rel","substring","isActive","position","deleteAd","description","imageUrl","_this3","isNew","type","value","oninput","placeholder","rows","parseInt","checked","onchange","saveAd","_this4","body","show","_this5","confirm","ExtensionPage","add","registerPage"],"ignoreList":[],"sourceRoot":""}