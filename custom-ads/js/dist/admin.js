(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["admin/app"];var a=t.n(e);function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}const n=flarum.core.compat["admin/components/ExtensionPage"];var o=t.n(n);const i=flarum.core.compat["common/components/Button"];var s=t.n(i);const l=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(l),c=function(t){function e(){return t.apply(this,arguments)||this}var n,o;o=t,(n=e).prototype=Object.create(o.prototype),n.prototype.constructor=n,r(n,o);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.loading=!0,this.ads=[],this.editingAd=null,this.loadAds()},i.loadAds=function(){var t=this;this.loading=!0,a().request({method:"GET",url:a().forum.attribute("apiUrl")+"/custom-ads"}).then(function(e){t.ads=e.data||[],t.loading=!1,m.redraw()})},i.content=function(){var t=this;return this.loading?m(u(),null):m("div",{className:"CustomAdsPage"},m("div",{className:"container"},m("h2",null,"Manage Custom Ads"),m(s(),{className:"Button Button--primary",onclick:function(){return t.showAdForm(null)}},"Add New Ad"),null!==this.editingAd&&this.adForm(),m("div",{className:"CustomAds-list",style:"margin-top: 20px;"},0===this.ads.length?m("p",null,'No ads created yet. Click "Add New Ad" to create one.'):m("table",{className:"Table",style:"width: 100%;"},m("thead",null,m("tr",null,m("th",null,"Title"),m("th",null,"URL"),m("th",null,"Status"),m("th",null,"Position"),m("th",null,"Actions"))),m("tbody",null,this.ads.map(function(e){return m("tr",{key:e.id},m("td",null,e.attributes.title),m("td",null,m("a",{href:e.attributes.url,target:"_blank",rel:"noopener noreferrer"},e.attributes.url.substring(0,50),"...")),m("td",null,m("span",{className:e.attributes.isActive?"Badge Badge--success":"Badge"},e.attributes.isActive?"Active":"Inactive")),m("td",null,e.attributes.position),m("td",null,m(s(),{className:"Button Button--link",onclick:function(){return t.showAdForm(e)}},"Edit")," ",m(s(),{className:"Button Button--link",onclick:function(){return t.deleteAd(e)}},"Delete")))}))))))},i.showAdForm=function(t){this.editingAd=t||{id:null,attributes:{title:"",description:"",imageUrl:"",url:"",position:0,isActive:!0}}},i.adForm=function(){var t=this,e=this.editingAd,a=!e.id;return m("div",{className:"Form",style:"background: #f9f9f9; padding: 20px; margin: 20px 0; border-radius: 4px;"},m("h3",null,a?"Add New Ad":"Edit Ad"),m("div",{className:"Form-group"},m("label",null,"Title *"),m("input",{className:"FormControl",type:"text",value:e.attributes.title,oninput:function(t){return e.attributes.title=t.target.value},placeholder:"Enter ad title"})),m("div",{className:"Form-group"},m("label",null,"Description *"),m("textarea",{className:"FormControl",rows:"3",value:e.attributes.description,oninput:function(t){return e.attributes.description=t.target.value},placeholder:"Enter ad description"})),m("div",{className:"Form-group"},m("label",null,"Image URL *"),m("input",{className:"FormControl",type:"text",value:e.attributes.imageUrl,oninput:function(t){return e.attributes.imageUrl=t.target.value},placeholder:"https://example.com/image.jpg"}),m("small",null,"Tip: Use /assets/extensions/knowz-custom-ads/images/yourimage.jpg for local images")),m("div",{className:"Form-group"},m("label",null,"Link URL *"),m("input",{className:"FormControl",type:"text",value:e.attributes.url,oninput:function(t){return e.attributes.url=t.target.value},placeholder:"https://example.com"})),m("div",{className:"Form-group"},m("label",null,"Position (lower numbers appear first)"),m("input",{className:"FormControl",type:"number",value:e.attributes.position,oninput:function(t){return e.attributes.position=parseInt(t.target.value)||0}})),m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:e.attributes.isActive,onchange:function(t){return e.attributes.isActive=t.target.checked}}),"Active (show this ad on the forum)")),m(s(),{className:"Button Button--primary",onclick:function(){return t.saveAd(e,a)}},a?"Create Ad":"Save Changes")," ",m(s(),{className:"Button",onclick:function(){return t.editingAd=null}},"Cancel"))},i.saveAd=function(t,e){var r=this;if(t.attributes.title&&t.attributes.description&&t.attributes.imageUrl&&t.attributes.url){var n=e?"POST":"PATCH",o=e?a().forum.attribute("apiUrl")+"/custom-ads":a().forum.attribute("apiUrl")+"/custom-ads/"+t.id;a().request({method:n,url:o,body:{data:{attributes:t.attributes}}}).then(function(){r.editingAd=null,r.loadAds(),a().alerts.show({type:"success"},e?"Ad created successfully!":"Ad updated successfully!")}).catch(function(){a().alerts.show({type:"error"},"Failed to save ad. Please try again.")})}else a().alerts.show({type:"error"},"Please fill in all required fields")},i.deleteAd=function(t){var e=this;confirm("Are you sure you want to delete this ad?")&&a().request({method:"DELETE",url:a().forum.attribute("apiUrl")+"/custom-ads/"+t.id}).then(function(){e.loadAds(),a().alerts.show({type:"success"},"Ad deleted successfully!")}).catch(function(){a().alerts.show({type:"error"},"Failed to delete ad. Please try again.")})},e}(o());a().initializers.add("knowz/custom-ads",function(){a().extensionData.for("knowz-custom-ads").registerPage(c)})})(),module.exports={}})();
//# sourceMappingURL=admin.js.map